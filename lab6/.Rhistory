group_by(country) %>%
summarize(max_catch = max(catch))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarize(max_catch = max(catch), na.rm = T)
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarize(max_catch = max(catch, na.rm = T))
View(fisheries_tidy_refocused)
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarize(max_catch = desc(max(catch, na.rm = T)))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
skim(catch)
fisheries_tidy_refocused %>%
group_by(country, catch) %>%
summarize(max_catch = max(catch, na.rm=T))
fisheries_tidy_refocused %>%
group_by(country) %>%
summarize(max_catch = max(catch, na.rm=T))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm=T))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(year == 2000) %>%
filter(max(catch, na.rm=T))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm=T))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country)
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T),
country)
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T),
country[max_catch]
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T),
country[max_catch])
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T),
country = country
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T),
country = country)
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
group_by(country)
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
select(country) %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T), country)
fisheries_tidy_refocused %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
summarize(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(year == 2000) %>%
summarise(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
group_by(country, catch) %>%
filter(year == 2000) %>%
summarise(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarise(max_catch = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(asfis_species_name))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(asfis_species_name), country)
fisheries_tidy_refocused %>%
group_by(country)
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(asfis_species_name))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(asfis_species_name))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T)) %>%
group_by(country)
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T)) %>%
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T),
country = country(max_sardine_count))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T),
country = country[max_sardine_count])
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T),
country = country[max_sardine_count==max(catch, na.rm = T)])
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_sardine_count = max(catch, na.rm = T),
country = country)
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(max_sardine_count = max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(desc(max_sardine_count = max(catch, na.rm = T)))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(max_sardine_count = max(desc(catch, na.rm = T)))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(max(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize()
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(catch)
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(catch, na.rm = T)
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(catch na.rm = T)
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(catch, na.rm = T)
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(catch = catch, na.rm = T)
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(catch = (catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(catch = (catch na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(catch = catch (na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_catch = max(catch), max_catch_name = name[which.max(catch)])
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_catch = max(catch), max_catch_name = country[which.max(catch)])
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(max_catch = max(catch, na.rm = T),
max_catch_country = country[which.max(catch)])
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
summarise(max_catch = max(catch, na.rm = T),
max_catch_country = country[which.max(catch)])
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise(max_catch = sum(catch, na.rm = T),
max_catch_country = country[which.max(catch)])
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise(desc(max_catch = sum(catch, na.rm = T)),
max_catch_country = country[which.max(catch)])
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise(desc(max_catch = sum(catch, na.rm = T)))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise((max_catch = sum(catch, na.rm = T)))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise(max_catch = sum(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise(catch_total = sum(catch, na.rm = T),
arrange(desc(catch_total)))
fisheries_tidy_refocused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarise(catch_total = sum(catch, na.rm = T)) %>%
arrange(desc(catch_total))
fisheries_tidy_refocused %>%
filter(between(year, 1990, 2000)) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(sardines_catch_total = sum(catch, na.rm = T),
max_catch_country = country[which.max(sardines_catch_total)])
fisheries_tidy_refocused %>%
filter(between(year, 2008, 2012)) %>%
filter(asfis_species_name == "cephalapods") %>%
group_by(country) %>%
summarize(total_cephalapods = sum(catch, na.rm = T)) %>%
arrange(desc(total_cephalapods))
fisheries_tidy_refocused %>%
filter(between(year, 2008, 2012)) %>%
filter(asfis_species_name == "Cephalapoda") %>%
group_by(country) %>%
summarize(total_cephalapods = sum(catch, na.rm = T)) %>%
arrange(desc(total_cephalapods))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(between(year, 2008, 2012)) %>%
filter(asfis_species_name == "Cephalapoda") %>%
summarize(total_cephalapods = sum(catch, na.rm = T)) %>%
arrange(desc(total_cephalapods))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(between(year, 2008, 2012)) %>%
filter(asfis_species_name == "Cephalapoda") %>%
summarize(total_cephalapods = sum(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 2008, 2012)) %>%
filter(asfis_species_name == "Cephalapoda") %>%
summarize(total_cephalapods = sum(catch, na.rm = T))
fisheries_tidy_refocused %>%
filter(between(year, 2008, 2012)) %>%
filter(asfis_species_name == "Cephalopoda") %>%
summarize(total_cephalapods = sum(catch, na.rm = T))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(between(year, 2008, 2012)) %>%
filter(asfis_species_name == "Cephalopoda") %>%
summarize(total_cephalapods = sum(catch, na.rm = T))
fisheries_tidy_refocused %>%
group_by(country) %>%
filter(between(year, 2008, 2012)) %>%
filter(asfis_species_name == "Cephalopoda") %>%
summarize(total_cephalapods = sum(catch, na.rm = T)) %>%
arrange(desc(total_cephalapods))
fisheries_tidy_refocused %>%
group_by(asfis_species_name) %>%
filter(between(year, 2008, 2012)) %>%
summarize(total_catch = sum(catch, na.rm = T)) %>%
arrange(desc(total_catch))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
ecosphere <- read_csv("data/ecs21351-sup-0003-SupplementS1.csv", skip=2) %>%
clean_names() %>%
slice(1:(n() - 18)) # this removes the footer
glimpse(ecosphere)
names(ecosphere)
glimpse(ecosphere)
View(ecosphere)
ecosphere %>%
summarize(distinct_birds = n_distinct(order))
ecosphere %>%
group_by(habitat) %>%
summarize(n_species = n(species))
ecosphere %>%
group_by(habitat) %>%
summarize(n_species = n_distinct(species))
ecosphere %>%
group_by(habitat) %>%
summarize(n_species = n_distinct(scinetific_name))
ecosphere %>%
group_by(habitat) %>%
summarize(n_species = n_distinct(scientific_name))
?slice_max
ecosphere %>%
group_by(species) %>%
select(winter_range_area) %>%
slice_max(n=5)
ecosphere %>%
group_by(scientific_name) %>%
select(winter_range_area) %>%
slice_max(n=5)
ecosphere %>%
group_by(scientific_name) %>%
select(winter_range_area) %>%
slice_max(,n=5)
ecosphere %>%
group_by(scientific_name) %>%
slice_max(winter_range_area,n=5)
ecosphere %>%
slice_max(winter_range_area)
ecosphere %>%
slice_max(winter_range_area, n=5)
ecosphere %>%
slice_min(winter_range_area, n=5)
ducks <- filter(family == "Anatidae") %>%
select(!c(order, family))
ducks <- ecosphere %>%
select(!c(order, family)) %>%
filter(family == "Anatidae") %>%
ducks <- ecosphere %>%
select(!c(order, family)) %>%
filter(family == "Anatidae")
ducks <- ecosphere %>%
filter(family == "Anatidae") %>%
select(!c(order, family))
ducks %>%
filter(habitat != wetland)
ducks %>%
filter(habitat != "wetland")
ducks %>%
summarize(mean_body_mass = mean(log10_mass),
migratory_strategy = migratory_strategy)
ducks %>%
summarize(mean_body_mass = mean(log10_mass),
migratory_strategy = migratory_strategy) %>%
arrange(desc(migratory_strategy))
ducks %>%
summarize(mean_body_mass = mean(log10_mass),
migratory_strategy = migratory_strategy) %>%
arrange(migratory_strategy)
ducks %>%
group_by(scientific_name) %>%
summarize(mean_body_mass = mean(log10_mass),
migratory_strategy = migratory_strategy) %>%
arrange(migratory_strategy)
eagles <- ecosphere %>%
filter(family == "Accipitridae") %>%
select(common_name, scientific_name, population_size)
eagles %>%
filter(population_size <250,000) %>%
mutate(conservation_status = "Threatened")
eagles %>%
mutate_if(population_size<250,000, conservation_status = "threatened")
eagles %>%
mutate(ifelse(population_size < 250,000,"threatened", "not threatened"))
eagles %>%
mutate(ifelse(population_size < 250000,"threatened", "not threatened"))
eagles %>%
mutate(ifelse(population_size < 250000,"threatened", "not threatened", na.rm=T))
eagles %>%
mutate(ifelse(population_size < 250000, na.rm = T,"threatened", "not threatened"))
eagles %>%
mutate(ifelse(population_size < 250000,"threatened", "not threatened"), na.rm = T)
eagles %>%
mutate(ifelse(population_size < 250000,"threatened", "not threatened")
eagles %>%
mutate(ifelse(population_size < 250000,"threatened", "not threatened")
eagles %>%
mutate(ifelse(population_size < 250000,"threatened", "not threatened"))
View(eagles)
eagles <- ecosphere %>%
filter(family == "Accipitridae") %>%
select(common_name, scientific_name, population_size, na.rm=T)
eagles %>%
filter(is.na(population_size))
ducks %>%
group_by(migratory_strategy) %>%
summarize(mean_body_mass = mean(log10_mass))
eagles <- ecosphere %>%
filter(family == "Accipitridae") %>%
select(common_name, scientific_name, population_size)
eagles <- ecosphere %>%
filter(family == "Accipitridae") %>%
select(common_name, scientific_name, population_size, na.rm=T)
eagles <- ecosphere %>%
filter(family == "Accipitridae") %>%
select(common_name, scientific_name, population_size)
View(ecosphere)
ecosphere %>%
group_by(diet)
filter(habitat == "wetland") %>%
summarize(mean_mass = mean(log10_mass))
ecosphere %>%
group_by(diet) %>%
filter(habitat == "wetland") %>%
summarize(mean_mass = mean(log10_mass))
ecosphere %>%
group_by(diet) %>%
filter(habitat == "Wetland") %>%
summarize(mean_mass = mean(log10_mass))
ecosphere %>%
group_by(diet) %>%
filter(habitat == "Wetland") %>%
summarize(mean_mass = mean(log10_mass)) %>%
ggplot(aes(diet, mean_mass))+
geom_col()+
theme_bw()+
labs(title = "Wetland Species",
x = "Diet",
y = "Mean Log10 Mass")
ecosphere %>%
group_by(diet) %>%
filter(habitat == "Wetland") %>%
summarize(mean_mass = mean(log10_mass)) %>%
ggplot(aes(diet, mean_mass))+
geom_col()+
theme_classic()+
labs(title = "Wetland Species",
x = "Diet",
y = "Mean Log10 Mass")
ecosphere %>%
group_by(diet) %>%
filter(habitat == "Wetland") %>%
summarize(mean_mass = mean(log10_mass)) %>%
ggplot(aes(diet, mean_mass))+
geom_col()+
theme_bw()+
labs(title = "Wetland Species",
x = "Diet",
y = "Mean Log10 Mass")
ecosphere <- read_csv("data/ecs21351-sup-0003-SupplementS1.csv", skip=2) %>%
clean_names() %>%
slice(1:(n() - 18)) # this removes the footer
setwd("C:/GitHub/BIS15W2023_rvarma/lab6")
ecosphere <- read_csv("lab6/data/ecs21351-sup-0003-SupplementS1.csv", skip=2) %>%
clean_names() %>%
slice(1:(n() - 18)) # this removes the footer
